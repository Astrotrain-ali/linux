uback系统部署
备份系统githup地址
	https://github.com/Daemon-guo/ubackup
环境
10.53.0.188
	安装jdk,elasticsearch,和备份系统
10.53.0.189
	安装redis,nginx，和备份系统
10.53.0.190
	安装备份系统




1;
10.53.0.188
安装jdk
yum -y install java-1.8.0-openjdk
安装elasticsearch
wget https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-6.2.4.tar.gz
tar xzvf elasticsearch-6.2.4.tar.gz
mv elasticsearch-6.2.4 /usr/local/elasticsearch
#修改启动脚本设置分别es内存大小
vim /usr/local/elasticsearch/bin/elasticsearch 
ES_JAVA_OPTS="-Xms4g -Xmx4g"
#修改elastic可创建的文件描述符大小
vim /etc/security/limits.conf
elastic hard nofile 65536
elastic soft nofile 65536
#修改限制用户拥有的最大进程数量
vim /etc/security/limits.d/90-nproc.conf
*          soft    nproc     1024改为4096
#修改
vi /etc/sysctl.conf 
#进程可以拥有的VMA(虚拟内存区域)的数量
追加vm.max_map_count=655360
sysctl -p
#新增elastic组及用户, 因为ES不允许root用户启动
groupadd elastic
useradd elastic -g elastic
echo 'elastic' | passwd --stdin elastic
chown -R elastic:elastic /usr/local/elasticsearch
#修改elastic配置文件,由于是单机运行es，只需要改这些配置就ok
vim /usr/local/elasticsearch/config/elasticsearch.yml
bootstrap.memory_lock: false
bootstrap.system_call_filter: false
network.host: 0.0.0.0

su elastic
/usr/local/elasticsearch/bin/elasticsearch -d #启动elasticsearch   不能使用root用户启动
验证
curl http://localhost:9200
